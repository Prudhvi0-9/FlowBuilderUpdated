<!DOCTYPE html>
<html xml:lang="en">
<head>
    <meta charset="UTF-8" />
    <title>WorkFlow</title>

    <!-- required modeler styles -->
    <link rel="stylesheet" href="https://unpkg.com/bpmn-js@6.3.0/dist/assets/diagram-js.css">
    <link rel="stylesheet" href="https://unpkg.com/bpmn-js@6.3.0/dist/assets/bpmn-font/css/bpmn.css">

    <!-- modeler distro -->
    <script src="https://unpkg.com/bpmn-js@6.3.0/dist/bpmn-modeler.development.js"></script>

    <!-- needed for this example only -->
    <script src="https://unpkg.com/jquery@3.3.1/dist/jquery.js"></script>
    <script src="/home/ramer/Videos/FlowBuilderFlask2602/src/js/development.js"></script>

    <!--    Buttons css-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    <!-- example styles -->
    <style>
      html, body, #canvas {
        height: 100%;
        padding: 0;
        margin: 0;
      }

      .diagram-note {
        background-color: rgba(66, 180, 21, 0.7);
        color: White;
        border-radius: 5px;
        font-family: Arial;
        font-size: 12px;
        padding: 5px;
        min-height: 16px;
        width: 50px;
        text-align: center;
      }

      .needs-discussion:not(.djs-connection) .djs-visual > :nth-child(1) {
        stroke: rgba(66, 180, 21, 0.7) !important; /* color elements as red */
      }

      #save-button {
        position: fixed;
        bottom: 20px;
        left: 20px;
      }
    </style>
</head>
<body>
<div id="canvas">
  <button class=" btn btn-secondary " onclick="prev()"><em class="fa fa-floppy-o"></em> Prev</button>
  <button class=" btn btn-primary " onclick="exportDiagram()"><em class="fa fa-floppy-o"></em> Save</button>
  <button class=" btn btn-success " onclick="flowList()"><em class="fa fa-floppy-o"></em> FlowList</button>
</div>

<div class="bjs-container" style="width: 100%; height: 100%; position: relative;">
    <div class="djs-palette open" style="touch-action: none; user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div>
    <button class="djs-palette open" onclick="exportDiagram()" >

</div>

<div class="entry bpmn-icon-start-event-none" draggable="true" onclick="one" data-action="create.start-event" style="right; text-align :right; width:auto;height:auto;">
    <div id="one" style="display:none;">
        Name:<div style="color:black; font-size:20px;" id='Name_Element'></div>
        value:<input onchange="editValue(this.value)" type='text' /><br><br>
        Size:<input onchange="editFontSize(this.value)" type='number' /><br><br>

        <div style="background-color:transparent;border:2px solid silver;width:100px;height:40px;"><em class="fa fa-trash" style="font-size:25px;color:black;padding-left:25px;" onclick="removeElement(event)"></em>
        </div>
</div>
<script>

      var diagramUrl = 'https://cdn.staticaly.com/gh/bpmn-io/bpmn-js-examples/dfceecba/starter/diagram.bpmn';

      // modeler instance
      var bpmnModeler = new BpmnJS({
        container: '#canvas',
        keyboard: {
          bindTo: window
        }
      });
    function xml2Json() {

        alert('xmltojson');

        xml.onreadystatechange = function() {
           if (xml.readyState === 4) {
              bpmnModeler.importXML(xml.response, function(err) {
                // ...
              });
           }
           alert('json');
           };

          xml.open('GET', 'path-to-diagram.bpmn', true);
          xml.send(null);

    }

      /**
       * Save diagram contents and print them to the console.
       */
      function exportDiagram(bpmnXML) {

        bpmnModeler.saveXML({ format: true }, function(err, xml) {

          if (err) {
            return console.error('could not save BPMN 2.0 diagram', err);
          }
        alert("xml Data is ::" +xml);
        console.log(JSON.stringify(xml))

        alert("data" +xml);

        });
      }

      /**
       * Open diagram in our modeler instance.
       *
       * @param {String} bpmnXML diagram to display
       */

      function openDiagram(bpmnXML) {

        // import diagram
        bpmnModeler.importXML(bpmnXML, function(err, xml) {

          if (err) {
            return console.error('could not import BPMN 2.0 diagram', err);
          }

          // access modeler components
          var canvas = bpmnModeler.get('canvas');
          var overlays = bpmnModeler.get('overlays');

          // zoom to fit full viewport
          canvas.zoom('fit-viewport');

          // attach an overlay to a node
          overlays.add('SCAN_OK', 'note', {
            position: {
              bottom: 0,
              right: 0
            },
            html: '<div class="diagram-note">Mixed up the labels?</div>'
          });

          // add marker
          canvas.addMarker('SCAN_OK', 'needs-discussion');
        });
      }
    function MagicPropertiesProvider(eventBus, bpmnFactory, elementRegistry, bpmnXML) {

      this.getTabs = function(element) {


        // The "magic" tab
        var magicTab = {
          id: 'magic',
          label: 'Magic',
          groups: createMagicTabGroups(element, elementRegistry, bpmnFactory)
        };

        // All avaliable tabs
        return [
          generalTab,
          magicTab
        ];
      };
    }

      // load external diagram file via AJAX and open it
      $.get(diagramUrl, openDiagram, xml2Json, 'text');

<!--      // wire save button-->
<!--      $('#save-button').click(exportDiagram);-->
    </script>

<div class="djs-palette open"  style="touch-action: none; user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div>
    <button class="djs-palette open" onclick="exportDiagram()" >



<!--
  Thanks for trying out our BPMN toolkit!

  This example uses the pre-built distribution of the bpmn-js modeler.
  Consider rolling your own distribution to have more flexibility
  regarding which features to include.

  Checkout our advanced examples section to learn more:
  * https://github.com/bpmn-io/bpmn-js-examples#advanced

  To get a bit broader overview over how bpmn-js works,
  follow our walkthrough:
  * https://bpmn.io/toolkit/bpmn-js/walkthrough/

  Related starters:
  * https://raw.githubusercontent.com/bpmn-io/bpmn-js-examples/starter/viewer.html
-->
</body>
</html>